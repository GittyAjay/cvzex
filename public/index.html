<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>cvzex - My Resumes</title>
  </head>
  <body class="bg-gray-50">
    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <div class="w-64 bg-white border-r border-gray-200 p-6">
        <div class="mb-12">
          <img src="/api/placeholder/32/32" alt="cvzex Logo" class="h-8" />
        </div>

        <!-- Navigation -->
        <nav class="space-y-2">
          <div
            class="text-purple-700 bg-purple-50 py-2 px-4 rounded-lg font-medium"
          >
            Resume
          </div>
          <div class="text-gray-700 py-2 px-4 hover:bg-gray-50 rounded-lg">
            Cover Letter
          </div>
          <div class="text-gray-700 py-2 px-4 hover:bg-gray-50 rounded-lg">
            Job Tracker
          </div>
          <div class="text-gray-700 py-2 px-4 hover:bg-gray-50 rounded-lg mt-6">
            More
          </div>
        </nav>

        <!-- Auth Buttons -->
        <div class="fixed bottom-8 left-6 w-52 space-y-3">
          <div id="userInfo" class="hidden">
            <p class="text-sm text-gray-600 mb-2"></p>
            <button
              id="signOutBtn"
              class="w-full py-2.5 px-4 border border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50"
            >
              Sign Out
            </button>
          </div>
          <div id="authButtons">
            <button
              id="loginBtn"
              class="w-full py-2.5 px-4 border border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50"
            >
              Login
            </button>
            <button
              id="signupBtn"
              class="w-full py-2.5 px-4 bg-purple-700 text-white rounded-lg hover:bg-purple-800 mt-3"
            >
              Signup
            </button>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="flex-1 p-8">
        <h1 class="text-2xl font-bold text-gray-900 mb-8">My Resumes</h1>

        <div class="grid grid-cols-2 gap-8">
          <!-- New Resume Card -->
          <div
            onclick="window.location.href='createResume.html'"
            class="border-2 border-dashed border-gray-200 rounded-xl bg-white p-6 h-72 flex items-center justify-center cursor-pointer hover:border-gray-300 transition-colors"
          >
            <div class="text-center">
              <div class="text-4xl text-gray-400 mb-2">+</div>
              <div class="text-gray-500">New resume</div>
            </div>
          </div>

          <!-- Existing Resume Card -->
          <div class="bg-white rounded-xl p-6 h-72">
            <div class="flex justify-between items-start">
              <div>
                <h3 class="text-gray-900 font-medium">Resume 1</h3>
                <p class="text-sm text-gray-500 mt-1">
                  edited a few secs ago â€¢ A4
                </p>
              </div>
              <button class="text-gray-400 hover:text-gray-600 p-1">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add this right before the closing body tag, after the existing script -->
    <!-- Auth Modals -->
    <div
      id="loginModal"
      class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
    >
      <div
        class="bg-white p-8 rounded-lg shadow-lg w-96"
        onclick="event.stopPropagation()"
      >
        <h2 class="text-2xl font-bold mb-6">Login</h2>
        <button
          onclick="signInWithGoogle()"
          class="w-full py-2.5 px-4 border border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50 flex items-center justify-center gap-2"
        >
          <img
            src="https://www.google.com/favicon.ico"
            alt="Google"
            class="w-5 h-5"
          />
          Continue with Google
        </button>
      </div>
    </div>

    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
      import {
        getAuth,
        GoogleAuthProvider,
        signInWithPopup,
        onAuthStateChanged,
        signOut,
      } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';

      // Firebase configuration
      const firebaseConfig = {
        apiKey: 'AIzaSyCsAtnIni2d7ZRdi7En6qF0DyJXuiLCL9Y',
        authDomain: 'swipmart-b9616.firebaseapp.com',
        databaseURL: 'https://swipmart-b9616-default-rtdb.firebaseio.com',
        projectId: 'swipmart-b9616',
        storageBucket: 'swipmart-b9616.firebasestorage.app',
        messagingSenderId: '159526208832',
        appId: '1:159526208832:web:a000685804f7902964e6a5',
        measurementId: 'G-7NN22J9KNJ',
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();

      // Make auth globally available
      window.auth = auth;

      // Define signInWithGoogle function
      window.signInWithGoogle = async function () {
        try {
          const result = await signInWithPopup(auth, provider);
          console.log('Successfully signed in with Google:', result.user.email);
          document.getElementById('loginModal').classList.add('hidden');
        } catch (error) {
          console.error('Google sign in error:', error);
          alert('Error signing in with Google: ' + error.message);
        }
      };

      // Auth state observer
      onAuthStateChanged(auth, (user) => {
        const userInfo = document.getElementById('userInfo');
        const authButtons = document.getElementById('authButtons');
        const userInfoText = userInfo?.querySelector('p');

        if (user) {
          if (userInfo && authButtons && userInfoText) {
            userInfoText.textContent = user.email;
            userInfo.classList.remove('hidden');
            authButtons.classList.add('hidden');
          }
        } else {
          if (userInfo && authButtons) {
            userInfo.classList.add('hidden');
            authButtons.classList.remove('hidden');
          }
        }
      });

      // Event Listeners
      document.addEventListener('DOMContentLoaded', () => {
        const loginBtn = document.getElementById('loginBtn');
        const signOutBtn = document.getElementById('signOutBtn');
        const loginModal = document.getElementById('loginModal');

        if (loginBtn) {
          loginBtn.addEventListener('click', () => {
            if (loginModal) {
              loginModal.classList.remove('hidden');
            }
          });
        }

        if (signOutBtn) {
          signOutBtn.addEventListener('click', async () => {
            try {
              await signOut(auth);
              console.log('User signed out');
            } catch (error) {
              console.error('Sign out error:', error);
              alert('Error signing out: ' + error.message);
            }
          });
        }

        // Close modal when clicking outside
        if (loginModal) {
          loginModal.addEventListener('click', (e) => {
            if (e.target === loginModal) {
              loginModal.classList.add('hidden');
            }
          });
        }
      });
    </script>
  </body>
</html>
